import "./chunk-FAW2VN4A.js";

// node_modules/@fancyapps/ui/dist/carousel/carousel.thumbs.esm.js
var t = (e2, ...i2) => {
  const s2 = i2.length;
  for (let n2 = 0; n2 < s2; n2++) {
    const s3 = i2[n2] || {};
    Object.entries(s3).forEach(([i3, s4]) => {
      const n3 = Array.isArray(s4) ? [] : {};
      var r2;
      e2[i3] || Object.assign(e2, { [i3]: n3 }), "object" == typeof (r2 = s4) && null !== r2 && r2.constructor === Object && "[object Object]" === Object.prototype.toString.call(r2) ? Object.assign(e2[i3], t(n3, s4)) : Array.isArray(s4) ? Object.assign(e2, { [i3]: [...s4] }) : Object.assign(e2, { [i3]: s4 });
    });
  }
  return e2;
};
var e = function(t2) {
  return new DOMParser().parseFromString(t2, "text/html").body.firstChild;
};
var i = (t2) => `${t2 || ""}`.split(" ").filter((t3) => !!t3);
var s = (t2, e2) => {
  i(e2).forEach((e3) => {
    t2 && t2.classList.add(e3);
  });
};
var n = (t2, e2, s2) => {
  i(e2).forEach((e3) => {
    t2 && t2.classList.toggle(e3, s2 || false);
  });
};
var r = function(t2, e2) {
  return t2.split(".").reduce((t3, e3) => "object" == typeof t3 ? t3[e3] : void 0, e2);
};
var o = class {
  constructor(t2 = {}) {
    Object.defineProperty(this, "options", { enumerable: true, configurable: true, writable: true, value: t2 }), Object.defineProperty(this, "events", { enumerable: true, configurable: true, writable: true, value: /* @__PURE__ */ new Map() }), this.setOptions(t2);
    for (const t3 of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))
      t3.startsWith("on") && "function" == typeof this[t3] && (this[t3] = this[t3].bind(this));
  }
  setOptions(e2) {
    this.options = e2 ? t({}, this.constructor.defaults, e2) : {};
    for (const [t2, e3] of Object.entries(this.option("on") || {}))
      this.on(t2, e3);
  }
  option(t2, ...e2) {
    let i2 = r(t2, this.options);
    return i2 && "function" == typeof i2 && (i2 = i2.call(this, this, ...e2)), i2;
  }
  optionFor(t2, e2, i2, ...s2) {
    let n2 = r(e2, t2);
    var o2;
    "string" != typeof (o2 = n2) || isNaN(o2) || isNaN(parseFloat(o2)) || (n2 = parseFloat(n2)), "true" === n2 && (n2 = true), "false" === n2 && (n2 = false), n2 && "function" == typeof n2 && (n2 = n2.call(this, this, t2, ...s2));
    let a2 = r(e2, this.options);
    return a2 && "function" == typeof a2 ? n2 = a2.call(this, this, t2, ...s2, n2) : void 0 === n2 && (n2 = a2), void 0 === n2 ? i2 : n2;
  }
  cn(t2) {
    const e2 = this.options.classes;
    return e2 && e2[t2] || "";
  }
  localize(t2, e2 = []) {
    t2 = String(t2).replace(/\{\{(\w+).?(\w+)?\}\}/g, (t3, e3, i2) => {
      let s2 = "";
      return i2 ? s2 = this.option(`${e3[0] + e3.toLowerCase().substring(1)}.l10n.${i2}`) : e3 && (s2 = this.option(`l10n.${e3}`)), s2 || (s2 = t3), s2;
    });
    for (let i2 = 0; i2 < e2.length; i2++)
      t2 = t2.split(e2[i2][0]).join(e2[i2][1]);
    return t2 = t2.replace(/\{\{(.*)\}\}/, (t3, e3) => e3);
  }
  on(t2, e2) {
    let i2 = [];
    "string" == typeof t2 ? i2 = t2.split(" ") : Array.isArray(t2) && (i2 = t2), this.events || (this.events = /* @__PURE__ */ new Map()), i2.forEach((t3) => {
      let i3 = this.events.get(t3);
      i3 || (this.events.set(t3, []), i3 = []), i3.includes(e2) || i3.push(e2), this.events.set(t3, i3);
    });
  }
  off(t2, e2) {
    let i2 = [];
    "string" == typeof t2 ? i2 = t2.split(" ") : Array.isArray(t2) && (i2 = t2), i2.forEach((t3) => {
      const i3 = this.events.get(t3);
      if (Array.isArray(i3)) {
        const t4 = i3.indexOf(e2);
        t4 > -1 && i3.splice(t4, 1);
      }
    });
  }
  emit(t2, ...e2) {
    [...this.events.get(t2) || []].forEach((t3) => t3(this, ...e2)), "*" !== t2 && this.emit("*", t2, ...e2);
  }
};
Object.defineProperty(o, "version", { enumerable: true, configurable: true, writable: true, value: "5.0.7" }), Object.defineProperty(o, "defaults", { enumerable: true, configurable: true, writable: true, value: {} });
var a = class extends o {
  constructor(t2, e2) {
    super(e2), Object.defineProperty(this, "instance", { enumerable: true, configurable: true, writable: true, value: t2 });
  }
  attach() {
  }
  detach() {
  }
};
var h;
!function(t2) {
  t2[t2.Init = 0] = "Init", t2[t2.Error = 1] = "Error", t2[t2.Ready = 2] = "Ready", t2[t2.Panning = 3] = "Panning", t2[t2.Mousemove = 4] = "Mousemove", t2[t2.Destroy = 5] = "Destroy";
}(h || (h = {}));
var l = (t2, e2 = 1e4) => (t2 = parseFloat(t2 + "") || 0, Math.round((t2 + Number.EPSILON) * e2) / e2);
var c = { classes: { container: "f-thumbs f-carousel__thumbs", viewport: "f-thumbs__viewport", track: "f-thumbs__track", slide: "f-thumbs__slide", isResting: "is-resting", isSelected: "is-selected", isLoading: "is-loading", hasThumbs: "has-thumbs" }, minCount: 2, parentEl: null, thumbTpl: '<button class="f-thumbs__slide__button" tabindex="0" type="button" aria-label="{{GOTO}}" data-carousel-index="%i"><img class="f-thumbs__slide__img" data-lazy-src="{{%s}}" alt="" /></button>', type: "modern" };
var u;
!function(t2) {
  t2[t2.Init = 0] = "Init", t2[t2.Ready = 1] = "Ready", t2[t2.Hidden = 2] = "Hidden", t2[t2.Disabled = 3] = "Disabled";
}(u || (u = {}));
var d = class extends a {
  constructor() {
    super(...arguments), Object.defineProperty(this, "type", { enumerable: true, configurable: true, writable: true, value: "modern" }), Object.defineProperty(this, "container", { enumerable: true, configurable: true, writable: true, value: null }), Object.defineProperty(this, "track", { enumerable: true, configurable: true, writable: true, value: null }), Object.defineProperty(this, "carousel", { enumerable: true, configurable: true, writable: true, value: null }), Object.defineProperty(this, "panzoom", { enumerable: true, configurable: true, writable: true, value: null }), Object.defineProperty(this, "thumbWidth", { enumerable: true, configurable: true, writable: true, value: 0 }), Object.defineProperty(this, "thumbClipWidth", { enumerable: true, configurable: true, writable: true, value: 0 }), Object.defineProperty(this, "thumbHeight", { enumerable: true, configurable: true, writable: true, value: 0 }), Object.defineProperty(this, "thumbGap", { enumerable: true, configurable: true, writable: true, value: 0 }), Object.defineProperty(this, "thumbExtraGap", { enumerable: true, configurable: true, writable: true, value: 0 }), Object.defineProperty(this, "shouldCenter", { enumerable: true, configurable: true, writable: true, value: true }), Object.defineProperty(this, "state", { enumerable: true, configurable: true, writable: true, value: u.Init });
  }
  formatThumb(t2, e2) {
    return this.instance.localize(e2, [["%i", t2.index], ["%d", t2.index + 1], ["%s", t2.thumbSrc || "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]]);
  }
  getSlides() {
    const t2 = [], e2 = this.option("thumbTpl") || "";
    if (e2)
      for (const i2 of this.instance.slides || []) {
        let s2 = "";
        i2.type && (s2 = `for-${i2.type}`, i2.type && ["video", "youtube", "vimeo", "html5video"].includes(i2.type) && (s2 += " for-video")), t2.push({ html: this.formatThumb(i2, e2), customClass: s2 });
      }
    return t2;
  }
  getProgress(t2) {
    const e2 = this.instance, i2 = e2.panzoom, s2 = e2.pages[t2] || 0;
    if (!s2 || !i2)
      return 0;
    let n2 = -1 * i2.current.e, r2 = e2.contentDim, o2 = (n2 - s2.pos) / (1 * s2.dim), a2 = (n2 + r2 - s2.pos) / (1 * s2.dim), h2 = (n2 - r2 - s2.pos) / (1 * s2.dim);
    return o2 = Math.max(0, Math.min(1, Math.abs(o2))), a2 = Math.max(0, Math.min(1, Math.abs(a2))), h2 = Math.max(0, Math.min(1, Math.abs(h2))), o2 = Math.min(o2, a2, h2), o2;
  }
  onInitSlide(t2, e2) {
    const i2 = e2.el;
    i2 && (e2.thumbSrc = i2.dataset.thumbSrc || e2.thumbSrc || "", e2.thumbClipWidth = parseFloat(i2.dataset.thumbClipWidth || "") || e2.thumbClipWidth || 0, e2.thumbHeight = parseFloat(i2.dataset.thumbHeight || "") || e2.thumbHeight || 0);
  }
  onInitSlides() {
    this.state === u.Init && this.build();
  }
  onRefreshM() {
    this.refreshModern();
  }
  onChangeM() {
    "modern" === this.type && (this.shouldCenter = true, this.centerModern());
  }
  onClickModern(t2) {
    t2.preventDefault(), t2.stopPropagation();
    const e2 = this.instance, i2 = e2.page, s2 = (t3) => {
      if (t3) {
        const e3 = t3.closest("[data-carousel-index]");
        if (e3)
          return parseInt(e3.dataset.carouselIndex || "", 10) || 0;
      }
      return -1;
    }, n2 = (t3, e3) => {
      const i3 = document.elementFromPoint(t3, e3);
      return i3 ? s2(i3) : -1;
    };
    let r2 = s2(t2.target);
    r2 < 0 && (r2 = n2(t2.clientX + this.thumbGap, t2.clientY), r2 === i2 && (r2 = i2 - 1)), r2 < 0 && (r2 = n2(t2.clientX - this.thumbGap, t2.clientY), r2 === i2 && (r2 = i2 + 1)), r2 < 0 && (r2 = ((e3) => {
      let s3 = n2(t2.clientX - e3, t2.clientY), o2 = n2(t2.clientX + e3, t2.clientY);
      return r2 < 0 && s3 === i2 && (r2 = i2 + 1), r2 < 0 && o2 === i2 && (r2 = i2 - 1), r2;
    })(this.thumbExtraGap)), r2 === i2 ? this.centerModern() : r2 > -1 && r2 < e2.pages.length && e2.slideTo(r2);
  }
  onTransformM() {
    if ("modern" !== this.type)
      return;
    const { instance: t2, container: e2, track: i2 } = this, s2 = t2.panzoom;
    if (!(e2 && i2 && s2 && this.panzoom))
      return;
    n(e2, this.cn("isResting"), s2.state !== h.Init && s2.isResting);
    let r2 = 0, o2 = 0, a2 = 0;
    for (const e3 of t2.slides) {
      let t3 = e3.index, i3 = e3.thumbSlideEl;
      if (!i3)
        continue;
      o2 = 0, n(i3, this.cn("isSelected"), t3 === this.instance.page), o2 = 1 - this.getProgress(t3), i3.style.setProperty("--progress", o2 ? o2 + "" : "");
      const s3 = 0.5 * ((e3.thumbWidth || 0) - this.thumbClipWidth);
      r2 += s3, o2 && (r2 -= o2 * (s3 + this.thumbExtraGap)), i3.style.setProperty("--shift", r2 + ""), r2 += s3, o2 && (r2 -= o2 * (s3 + this.thumbExtraGap)), r2 -= this.thumbGap, 0 === t3 && (a2 = this.thumbExtraGap * o2);
    }
    i2 && (i2.style.setProperty("--left", a2 + ""), i2.style.setProperty("--width", r2 + a2 + this.thumbGap + this.thumbExtraGap * o2 + "")), this.shouldCenter && this.centerModern();
  }
  buildClassic() {
    const { container: e2, track: i2 } = this, s2 = this.getSlides();
    if (!e2 || !i2 || !s2)
      return;
    const n2 = new this.instance.constructor(e2, t({ track: i2, infinite: false, center: true, fill: true, dragFree: true, slidesPerPage: 1, transition: false, Dots: false, Navigation: false, Sync: {}, classes: { container: "f-thumbs", viewport: "f-thumbs__viewport", track: "f-thumbs__track", slide: "f-thumbs__slide" } }, this.option("Carousel") || {}, { Sync: { target: this.instance }, slides: s2 }));
    this.carousel = n2, this.track = i2, n2.on("ready", () => {
      this.emit("ready");
    });
  }
  buildModern() {
    if ("modern" !== this.type)
      return;
    const { container: t2, track: i2, instance: n2 } = this, r2 = this.option("thumbTpl") || "";
    if (!t2 || !i2 || !r2)
      return;
    s(t2, "is-horizontal"), this.updateModern();
    for (const t3 of n2.slides || []) {
      const n3 = document.createElement("div");
      if (s(n3, this.cn("slide")), t3.type) {
        let e2 = `for-${t3.type}`;
        ["video", "youtube", "vimeo", "html5video"].includes(t3.type) && (e2 += " for-video"), s(n3, e2);
      }
      n3.appendChild(e(this.formatThumb(t3, r2))), t3.thumbSlideEl = n3, i2.appendChild(n3), this.resizeModernSlide(t3);
    }
    const o2 = new n2.constructor.Panzoom(t2, { content: i2, lockAxis: "x", zoom: false, panOnlyZoomed: false, bounds: () => {
      let t3 = 0, e2 = 0, i3 = n2.slides[0], s2 = n2.slides[n2.slides.length - 1], r3 = n2.slides[n2.page];
      return i3 && s2 && r3 && (e2 = -1 * this.getModernThumbPos(0), 0 !== n2.page && (e2 += 0.5 * (i3.thumbWidth || 0)), t3 = -1 * this.getModernThumbPos(n2.slides.length - 1), n2.page !== n2.slides.length - 1 && (t3 += (s2.thumbWidth || 0) - (r3.thumbWidth || 0) - 0.5 * (s2.thumbWidth || 0))), { x: { min: t3, max: e2 }, y: { min: 0, max: 0 } };
    } });
    o2.on("touchStart", () => {
      this.shouldCenter = false;
    }), o2.on("click", (t3, e2) => this.onClickModern(e2)), o2.on("ready", () => {
      this.centerModern(), this.emit("ready");
    }), o2.on(["afterTransform", "refresh"], (t3) => {
      this.lazyLoadModern();
    }), this.panzoom = o2, this.refreshModern();
  }
  updateModern() {
    if ("modern" !== this.type)
      return;
    const { container: t2 } = this;
    t2 && (this.thumbGap = parseFloat(getComputedStyle(t2).getPropertyValue("--f-thumb-gap")) || 0, this.thumbExtraGap = parseFloat(getComputedStyle(t2).getPropertyValue("--f-thumb-extra-gap")) || 0, this.thumbWidth = parseFloat(getComputedStyle(t2).getPropertyValue("--f-thumb-width")) || 40, this.thumbClipWidth = parseFloat(getComputedStyle(t2).getPropertyValue("--f-thumb-clip-width")) || 40, this.thumbHeight = parseFloat(getComputedStyle(t2).getPropertyValue("--f-thumb-height")) || 40);
  }
  refreshModern() {
    var t2;
    if ("modern" === this.type) {
      this.updateModern();
      for (const t3 of this.instance.slides || [])
        this.resizeModernSlide(t3);
      this.onTransformM(), null === (t2 = this.panzoom) || void 0 === t2 || t2.updateMetrics(true), this.centerModern(0);
    }
  }
  centerModern(t2) {
    const e2 = this.instance, { container: i2, panzoom: s2 } = this;
    if (!i2 || !s2 || s2.state === h.Init)
      return;
    const n2 = e2.page;
    let r2 = this.getModernThumbPos(n2), o2 = r2;
    for (let t3 = e2.page - 3; t3 < e2.page + 3; t3++) {
      if (t3 < 0 || t3 > e2.pages.length - 1 || t3 === e2.page)
        continue;
      const i3 = 1 - this.getProgress(t3);
      i3 > 0 && i3 < 1 && (o2 += i3 * (this.getModernThumbPos(t3) - r2));
    }
    let a2 = 100;
    void 0 === t2 && (t2 = 0.2, e2.inTransition.size > 0 && (t2 = 0.12), Math.abs(-1 * s2.current.e - o2) > s2.containerRect.width && (t2 = 0.5, a2 = 0)), s2.options.maxVelocity = a2, s2.applyChange({ panX: l(-1 * o2 - s2.target.e, 1e3), friction: null === e2.prevPage ? 0 : t2 });
  }
  lazyLoadModern() {
    const { instance: t2, panzoom: i2 } = this;
    if (!i2)
      return;
    const n2 = -1 * i2.current.e || 0;
    let r2 = this.getModernThumbPos(t2.page);
    if (i2.state !== h.Init || 0 === r2)
      for (const r3 of t2.slides || []) {
        const t3 = r3.thumbSlideEl;
        if (!t3)
          continue;
        const o2 = t3.querySelector("img[data-lazy-src]"), a2 = r3.index, h2 = this.getModernThumbPos(a2), l2 = n2 - 0.5 * i2.containerRect.innerWidth, c2 = l2 + i2.containerRect.innerWidth;
        if (!o2 || h2 < l2 || h2 > c2)
          continue;
        let u2 = o2.dataset.lazySrc;
        if (!u2 || !u2.length)
          continue;
        if (delete o2.dataset.lazySrc, o2.src = u2, o2.complete)
          continue;
        s(t3, this.cn("isLoading"));
        const d2 = e('<div class="f-spinner"><svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="20"></circle><circle cx="25" cy="25" r="20"></circle></svg></div>');
        t3.appendChild(d2), o2.addEventListener("load", () => {
          t3.offsetParent && (t3.classList.remove(this.cn("isLoading")), d2.remove());
        }, false);
      }
  }
  resizeModernSlide(t2) {
    if ("modern" !== this.type)
      return;
    if (!t2.thumbSlideEl)
      return;
    const e2 = t2.thumbClipWidth && t2.thumbHeight ? Math.round(this.thumbHeight * (t2.thumbClipWidth / t2.thumbHeight)) : this.thumbWidth;
    t2.thumbWidth = e2;
  }
  getModernThumbPos(t2) {
    const e2 = this.instance.slides[t2], i2 = this.panzoom;
    if (!i2 || !i2.contentRect.fitWidth)
      return 0;
    let s2 = i2.containerRect.innerWidth, n2 = i2.contentRect.width;
    2 === this.instance.slides.length && (t2 -= 1, n2 = 2 * this.thumbClipWidth);
    let r2 = t2 * (this.thumbClipWidth + this.thumbGap) + this.thumbExtraGap + 0.5 * (e2.thumbWidth || 0);
    return r2 -= n2 > s2 ? 0.5 * s2 : 0.5 * n2, l(r2 || 0, 1);
  }
  build() {
    const t2 = this.instance, e2 = t2.container, i2 = this.option("minCount") || 0;
    if (i2) {
      let e3 = 0;
      for (const i3 of t2.slides || [])
        i3.thumbSrc && e3++;
      if (e3 < i2)
        return this.cleanup(), void (this.state = u.Disabled);
    }
    const n2 = this.option("type");
    if (["modern", "classic"].indexOf(n2) < 0)
      return void (this.state = u.Disabled);
    this.type = n2;
    const r2 = document.createElement("div");
    s(r2, this.cn("container")), s(r2, `is-${n2}`);
    const o2 = this.option("parentEl");
    o2 ? o2.appendChild(r2) : e2.after(r2), this.container = r2, s(e2, this.cn("hasThumbs"));
    const a2 = document.createElement("div");
    s(a2, this.cn("track")), r2.appendChild(a2), this.track = a2, "classic" === n2 ? this.buildClassic() : this.buildModern(), this.state = u.Ready;
  }
  cleanup() {
    var t2, e2;
    this.carousel && this.carousel.destroy(), this.carousel = null, this.panzoom && this.panzoom.destroy(), this.panzoom = null, this.container && this.container.remove(), this.container = null, this.track = null, this.state = u.Init, t2 = this.instance.container, e2 = this.cn("hasThumbs"), i(e2).forEach((e3) => {
      t2 && t2.classList.remove(e3);
    });
  }
  attach() {
    this.instance.on("initSlide", this.onInitSlide), this.instance.on("initSlides", this.onInitSlides), this.instance.on("Panzoom.afterTransform", this.onTransformM), this.instance.on("Panzoom.refresh", this.onRefreshM), this.instance.on("change", this.onChangeM);
  }
  detach() {
    this.instance.off("initSlide", this.onInitSlide), this.instance.off("initSlides", this.onInitSlides), this.instance.off("Panzoom.afterTransform", this.onTransformM), this.instance.off("Panzoom.refresh", this.onRefreshM), this.instance.off("change", this.onChangeM), this.cleanup();
  }
};
Object.defineProperty(d, "defaults", { enumerable: true, configurable: true, writable: true, value: c });
export {
  u as States,
  d as Thumbs,
  c as defaultOptions
};
//# sourceMappingURL=@fancyapps_ui_dist_carousel_carousel__thumbs__esm__js.js.map
